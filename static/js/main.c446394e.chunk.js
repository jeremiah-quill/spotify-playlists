(this["webpackJsonpspotify-playlist-palette"]=this["webpackJsonpspotify-playlist-palette"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(11),i=a.n(r),c=a(13),l=a(14),o=a(15),u=a(16),h=function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isError:!1},n}return Object(l.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log("ERROR: ".concat(e,", ERRORINFO: ").concat(t))}},{key:"render",value:function(){return this.state.isError?s.a.createElement("div",{className:"ErrorBoundary"},"Sorry, an error occured!"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{isError:!0}}}]),a}(n.Component),d=(a(69),a(34)),p=a(36),m=a(7),y=a.n(m),f=a(22),v=a(4),b=a(28),k=a.n(b);function g(e){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+t}});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function C(e,t){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(y.a.mark((function e(t,a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get(t,{headers:{Authorization:"Bearer "+a}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(e,t){return j.apply(this,arguments)}function j(){return(j=Object(f.a)(y.a.mark((function e(t,a){var n,s,r,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],s=0;case 2:if(!(s<t.items.length)){e.next=12;break}return r="https://api.spotify.com/v1/playlists/".concat(t.items[s].id,"/tracks"),e.next=6,N(r,a);case 6:i=e.sent,c={name:t.items[s].name,id:t.items[s].id,tracks:i},n.push(c);case 9:s++,e.next=2;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(y.a.mark((function e(t,a){var n,s,r,i,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],s=!0,r=t;case 3:if(!s){e.next=18;break}return e.next=6,w(r,a);case 6:if((i=e.sent).data){e.next=11;break}return e.abrupt("return");case 11:for(c=0;c<i.data.items.length;c++)l={name:i.data.items[c].track.name,id:i.data.items[c].track.id,artists:i.data.items[c].track.artists.map((function(e){return{name:e.name,id:e.id}}))},n.push(l);if(r=i.data.next){e.next=16;break}return s=!1,e.abrupt("return",n);case 16:e.next=3;break;case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(y.a.mark((function e(t,a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat(t),{headers:{Authorization:"Bearer "+a}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function S(e){for(var t=Object(p.a)({},e,{tracks:Object(d.a)(e.tracks)}),a=Math.floor(t.level/100*t.tracks.length),n=[],s=0;s<a;s++){var r=Math.floor(Math.random()*t.tracks.length);n.push(t.tracks[r]),t.tracks.splice(r,1)}return n}function L(e){return e.map((function(e){return t=e.id,"spotify:track:".concat(t);var t}))}function _(e,t,a){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(y.a.mark((function e(t,a,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("https://api.spotify.com/v1/playlists/".concat(a,"/tracks"),{uris:L(t)},{headers:{Authorization:"Bearer "+n}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,a){return B.apply(this,arguments)}function B(){return(B=Object(f.a)(y.a.mark((function e(t,a,n){var s,r,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.length,r=0,i=s>100?100:s,c=t.slice(r,i);case 4:if(!s){e.next=13;break}return e.next=7,_(c,a,n);case 7:s-=c.length,r+=c.length,i=s>100?i+100:i+s,c=t.slice(r,i),e.next=4;break;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}var A=a(58),z=a.n(A),T=(a(88),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isDropdown:!1},n.handleClick=n.handleClick.bind(Object(v.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"Navbar"},this.props.username&&s.a.createElement("div",{onClick:this.handleClick,className:"account-widget"},s.a.createElement(z.a,{className:"userIcon"}),s.a.createElement("span",null,this.props.username)))}}]),a}(n.Component)),F=(a(94),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(v.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){this.props.isLocked?this.props.removePlaylist(this.props.playlist.id):this.props.addPlaylist(this.props.playlist)}},{key:"render",value:function(){var e=this.props,t=e.isLocked,a=e.playlist;return s.a.createElement("div",{className:"Playlist ".concat(t&&"disabled"),onClick:this.handleClick},s.a.createElement("div",{className:"Playlist-name"},a.name))}}]),a}(n.Component));a(95);var H=function(e){return s.a.createElement("div",{className:"kabobloader"},s.a.createElement("div",{className:"bounce1"}),s.a.createElement("div",{className:"bounce2"}),s.a.createElement("div",{className:"bounce3"}))},U=a(60),J=a.n(U),W=(a(96),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(v.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){this.props.findMorePlaylists()}},{key:"render",value:function(){var e=this.props,t=e.playlists,a=e.addPlaylist,n=e.removePlaylist,r=e.chosenPlaylistIDs,i=e.isMorePlaylists,c=e.isLoading,l=i&&t.length>0;return s.a.createElement("div",{className:"PlaylistBar-container"},s.a.createElement("div",{className:"sidebar-branding"},s.a.createElement("img",{src:J.a,alt:"spotify-logo",className:"logo"})),s.a.createElement("div",{className:"PlaylistBar"},c?s.a.createElement(H,null):s.a.createElement("div",{className:"playlists-container"},t.map((function(e){return s.a.createElement(F,{addPlaylist:a,removePlaylist:n,key:e.id,isLocked:-1!==r.indexOf(e.id),playlist:e})})),l&&s.a.createElement("div",{className:"more-playlist-button-container"},s.a.createElement("div",{onClick:this.handleClick,className:"more-playlist-button"},"More Playlists")))))}}]),a}(n.Component)),V=a(8),$=a(135),q=a(38),G=a.n(q),K=(a(97),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isChanging:!1},n.handleClick=n.handleClick.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleChangeCommitted=n.handleChangeCommitted.bind(Object(v.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){this.props.removePlaylist(this.props.playlist.id)}},{key:"handleChange",value:function(e,t){this.props.onLevelChange(this.props.playlist.id,t),this.setState({isChanging:!0})}},{key:"handleChangeCommitted",value:function(){this.setState({isChanging:!1})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.playlist,n=a.tracks.length,r=Math.floor(a.level/100*a.tracks.length);return s.a.createElement("div",{className:"PlaylistSlider"},s.a.createElement(G.a,{className:"PlaylistSlider-remove-button",onClick:this.handleClick}),s.a.createElement("div",{className:t.root},s.a.createElement($.a,{className:"slider",orientation:"vertical",onChangeCommitted:this.handleChangeCommitted,onChange:this.handleChange,defaultValue:50})),s.a.createElement("div",{className:"track-count-container"},s.a.createElement("span",{className:"".concat(this.state.isChanging&&"isChanging")},r),s.a.createElement("span",{className:"track-count"},"/ ".concat(n))),s.a.createElement("h3",{className:"playlist-name"},a.name))}}]),a}(n.Component)),Q=Object(V.a)({root:{height:"300px"}})(K),X=a(39),Y=a(134),Z=a(133),ee=a(132),te=a(131),ae=a(104),ne=(a(98),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={name:"",open:!1,modalOpen:!1,isInvalidName:!1},n.handleClick=n.handleClick.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.closeSnackbar=n.closeSnackbar.bind(Object(v.a)(n)),n.handleModalOpen=n.handleModalOpen.bind(Object(v.a)(n)),n.handleModalClose=n.handleModalClose.bind(Object(v.a)(n)),n}return Object(l.a)(a,[{key:"handleModalOpen",value:function(){this.setState({modalOpen:!0})}},{key:"handleModalClose",value:function(){this.setState({modalOpen:!1})}},{key:"closeSnackbar",value:function(){this.setState({open:!1})}},{key:"handleClick",value:function(e){var t=this;this.state.name?(this.props.createPlaylist(this.state.name),this.setState({name:"",open:!0,modalOpen:!1}),e.preventDefault()):(this.setState({isInvalidName:!0}),setTimeout((function(){t.setState({isInvalidName:!1})}),3e3))}},{key:"handleChange",value:function(e){this.setState(Object(X.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.props.classes,t=this.state.isInvalidName;return s.a.createElement("div",{className:"NewPlaylistForm"},s.a.createElement("div",{className:"NewPlaylistForm-form"},s.a.createElement("button",{onClick:this.handleModalOpen,className:"create-playlist-button"},"Create Playlist (".concat(this.props.newPlaylistTrackCount," songs)")),s.a.createElement(ee.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:this.state.modalOpen,onClose:this.handleClose,closeAfterTransition:!0,BackdropComponent:te.a,BackdropProps:{timeout:500}},s.a.createElement(ae.a,{in:this.state.modalOpen},s.a.createElement("div",{className:"".concat(e.paper," modal-content")},s.a.createElement(G.a,{className:"close-icon",onClick:this.handleModalClose}),s.a.createElement("h3",null,"Create Playlist"),s.a.createElement("div",{className:"input-container"},s.a.createElement("label",{htmlFor:"name"},"Name"),s.a.createElement("input",{id:"name",onChange:this.handleChange,value:this.state.name,name:"name",type:"text",className:"name-input ".concat(t&&"red-outline")}),s.a.createElement("div",{className:"invalid-name-text ".concat(t&&"show-invalid")},"Please name your playlist"),s.a.createElement("button",{className:"create-playlist-button",onClick:this.handleClick},"Submit")))))),s.a.createElement(Y.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:3e3,message:s.a.createElement("span",{id:"message-id"},"Playlist added"),contentprops:{"aria-describedby":"message-id"},onClose:this.closeSnackbar,action:[s.a.createElement(Z.a,{onClick:this.closeSnackbar},s.a.createElement(G.a,null))]}))}}]),a}(n.Component)),se=Object(V.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{border:"2px solid #000"}})(ne),re=(a(99),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getNewTrackCount=n.getNewTrackCount.bind(Object(v.a)(n)),n}return Object(l.a)(a,[{key:"getNewTrackCount",value:function(){if(this.props.chosenPlaylists.length)return this.props.chosenPlaylists.map((function(e){return Math.floor(e.level/100*e.tracks.length)})).reduce((function(e,t){return e+t}))}},{key:"render",value:function(){var e=this.props,t=e.chosenPlaylists,a=e.removePlaylist,n=e.onLevelChange,r=e.createPlaylist;return s.a.createElement("div",{className:"MixingBoard"},s.a.createElement("div",{className:"MixingBoard-container"},t.length>0?s.a.createElement("div",{className:"MixingBoard-playlists"},t.map((function(e){return s.a.createElement(Q,{removePlaylist:a,onLevelChange:n,playlist:e,key:e.id})}))):s.a.createElement("div",{className:"instructions-banner"},"Add playlists to begin")),t.length>0&&s.a.createElement(se,{newPlaylistTrackCount:this.getNewTrackCount(),createPlaylist:r}))}}]),a}(n.Component));a(100);var ie=function(e){return s.a.createElement("div",{className:"ErrorMessage"},s.a.createElement("div",null,e.message))},ce=(a(101),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={access_token:n.getHashParams().access_token,isAuthenticated:!1,userData:{},playlists:[],isLoadingPlaylists:!0,isLoadingNewPlaylist:!1,chosenPlaylists:[],isMorePlaylists:"",isError:""},n.getHashParams=n.getHashParams.bind(Object(v.a)(n)),n.addPlaylist=n.addPlaylist.bind(Object(v.a)(n)),n.removePlaylist=n.removePlaylist.bind(Object(v.a)(n)),n.createPlaylist=n.createPlaylist.bind(Object(v.a)(n)),n.onLevelChange=n.onLevelChange.bind(Object(v.a)(n)),n.findMorePlaylists=n.findMorePlaylists.bind(Object(v.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(y.a.mark((function e(){var t,a,n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://accounts.spotify.com/authorize?client_id=".concat(this.props.clientID,"&redirect_uri=").concat(this.props.redirectURI,"&scope=").concat(this.props.scope,"&show_dialog=true&response_type=token"),this.state.access_token||(window.location.href=t),e.next=4,g(this.state.access_token);case 4:if((a=e.sent).data){e.next=9;break}this.setState({isError:"Error: ".concat(a.response.status)}),e.next=20;break;case 9:return e.next=11,C("https://api.spotify.com/v1/users/".concat(a.data.id,"/playlists/?limit=20"),this.state.access_token);case 11:if((n=e.sent).data){e.next=16;break}this.setState({isError:"Error: ".concat(n.response.status)}),e.next=20;break;case 16:return e.next=18,E(n.data,this.state.access_token);case 18:s=e.sent,this.setState({playlists:s,userData:a.data,isLoadingPlaylists:!1,isMorePlaylists:n.data.next});case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addPlaylist",value:function(e){if(this.state.chosenPlaylists.length<this.props.maxPlaylists){var t=Object(p.a)({},e,{level:50});this.setState((function(e){return{chosenPlaylists:[].concat(Object(d.a)(e.chosenPlaylists),[t])}}))}}},{key:"removePlaylist",value:function(e){var t=this;this.setState((function(a){return{chosenPlaylists:t.state.chosenPlaylists.filter((function(t){return t.id!==e}))}}))}},{key:"onLevelChange",value:function(e,t){var a=this.state.chosenPlaylists.map((function(a){return a.id===e?Object(p.a)({},a,{level:t}):a}));this.setState({chosenPlaylists:a})}},{key:"createPlaylist",value:function(){var e=Object(f.a)(y.a.mark((function e(t){var a,n,s,r,i,c,l,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setState({isLoadingNewPlaylist:!0}),a=[],n=0;n<this.state.chosenPlaylists.length;n++)for(s=S(this.state.chosenPlaylists[n]),r=0;r<s.length;r++)a.push(s[r]);return R(a),e.next=6,k.a.post("https://api.spotify.com/v1/users/".concat(this.state.userData.id,"/playlists"),{name:t},{headers:{Authorization:"Bearer "+this.state.access_token}});case 6:return i=e.sent,e.next=9,i.data.id;case 9:return c=e.sent,e.next=12,D(a,c,this.state.access_token);case 12:return e.next=14,C("https://api.spotify.com/v1/users/".concat(this.state.userData.id,"/playlists"),this.state.access_token);case 14:return l=e.sent,e.next=17,E(l.data,this.state.access_token);case 17:o=e.sent,this.setState({playlists:o,isMorePlaylists:l.data.next,isLoadingNewPlaylist:!1});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findMorePlaylists",value:function(){var e=Object(f.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoadingNewPlaylist:!0}),e.next=3,C(this.state.isMorePlaylists,this.state.access_token);case 3:return t=e.sent,e.next=6,E(t.data,this.state.access_token);case 6:a=e.sent,this.setState((function(e){return{playlists:[].concat(Object(d.a)(e.playlists),Object(d.a)(a)),isLoadingNewPlaylist:!1,isMorePlaylists:t.data.next}}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHashParams",value:function(){for(var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=a.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}},{key:"render",value:function(){var e="https://accounts.spotify.com/authorize?client_id=".concat(this.props.clientID,"&redirect_uri=").concat(this.props.redirectURI,"&scope=").concat(this.props.scope,"&show_dialog=true&response_type=token"),t=this.state,a=t.access_token,n=t.chosenPlaylists,r=t.isLoadingPlaylists,i=t.isLoadingNewPlaylist,c=t.playlists,l=t.isMorePlaylists,o=t.isError;return o?s.a.createElement(ie,{message:o}):r?s.a.createElement(H,null):s.a.createElement("div",{className:"App"},s.a.createElement(T,{authorizeURL:e,accessToken:a,username:this.state.userData.id}),s.a.createElement("div",{className:"App-content-container"},s.a.createElement(W,{chosenPlaylistIDs:n.map((function(e){return e.id})),addPlaylist:this.addPlaylist,removePlaylist:this.removePlaylist,isLoading:i,playlists:c,isMorePlaylists:l,findMorePlaylists:this.findMorePlaylists}),s.a.createElement(re,{chosenPlaylists:n,createPlaylist:this.createPlaylist,removePlaylist:this.removePlaylist,onLevelChange:this.onLevelChange})))}}]),a}(n.Component));ce.defaultProps={clientID:"9a9bc27e766d4e48bcd18dad29e5a877",redirectURI:"http://localhost:3000",scope:"user-read-private playlist-read-private playlist-modify-public playlist-modify-private",maxPlaylists:4};var le=ce;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(h,null,s.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){e.exports=a.p+"static/media/spotify-icon-logo.11dc437a.png"},64:function(e,t,a){e.exports=a(102)},69:function(e,t,a){},88:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.c446394e.chunk.js.map