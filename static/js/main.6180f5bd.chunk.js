(this["webpackJsonpspotify-playlist-palette"]=this["webpackJsonpspotify-playlist-palette"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(11),r=a.n(i),l=a(13),c=a(14),o=a(15),u=a(16),h=function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isError:!1},n}return Object(c.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log("ERROR: ".concat(e,", ERRORINFO: ").concat(t))}},{key:"render",value:function(){return this.state.isError?s.a.createElement("div",{className:"ErrorBoundary"},"Sorry, an error occured!"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{isError:!0}}}]),a}(n.Component),d=(a(71),a(38)),p=a(46),m=a(7),y=a.n(m),v=a(22),f=a(3),k=a(33),b=a.n(k),g=a(61),P=a.n(g),C=a(60),O=a.n(C),j=a(58),E=a.n(j),x=(a(90),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isDropdown:!1},n.handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.setState((function(e){return{isDropdown:!e.isDropdown}}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"Navbar"},this.props.username&&s.a.createElement("div",{onClick:this.handleClick,className:"account-widget"},s.a.createElement(E.a,{className:"userIcon"}),s.a.createElement("span",null,this.props.username),this.state.isDropdown?s.a.createElement(O.a,null):s.a.createElement(P.a,null),this.state.isDropdown&&s.a.createElement("div",{className:"dropdown-menu"},s.a.createElement("div",{className:"dropdown-item"},"dropdown item"))))}}]),a}(n.Component)),N=(a(96),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.isLocked?this.props.removePlaylist(this.props.playlist.id):this.props.addPlaylist(this.props.playlist)}},{key:"render",value:function(){var e=this.props,t=e.isLocked,a=e.playlist;return s.a.createElement("div",{className:"Playlist ".concat(t&&"disabled"),onClick:this.handleClick},s.a.createElement("div",{className:"Playlist-name"},a.name))}}]),a}(n.Component));a(97);var w=function(e){return s.a.createElement("div",{className:"kabobloader"},s.a.createElement("div",{className:"bounce1"}),s.a.createElement("div",{className:"bounce2"}),s.a.createElement("div",{className:"bounce3"}))},M=a(62),S=a.n(M),L=(a(98),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.findMorePlaylists()}},{key:"render",value:function(){var e=this.props,t=e.playlists,a=e.addPlaylist,n=e.removePlaylist,i=e.chosenPlaylistIDs,r=e.isMorePlaylists,l=e.isLoading;return s.a.createElement("div",{className:"PlaylistBar-container"},s.a.createElement("div",{className:"sidebar-branding"},s.a.createElement("img",{src:S.a,alt:"spotify-logo",className:"logo"})),s.a.createElement("div",{className:"PlaylistBar"},l?s.a.createElement(w,null):s.a.createElement("div",{className:"playlists-container"},t.map((function(e){return s.a.createElement(N,{addPlaylist:a,removePlaylist:n,key:e.id,isLocked:-1!==i.indexOf(e.id),playlist:e})})),r&&s.a.createElement("div",{className:"more-playlist-button-container"},s.a.createElement("div",{onClick:this.handleClick,className:"more-playlist-button"},"More Playlists")))))}}]),a}(n.Component)),D=a(8),T=a(136),I=a(37),A=a.n(I),_=(a(99),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isChanging:!1},n.handleClick=n.handleClick.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleChangeCommitted=n.handleChangeCommitted.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.removePlaylist(this.props.playlist.id)}},{key:"handleChange",value:function(e,t){this.props.onLevelChange(this.props.playlist.id,t),this.setState({isChanging:!0})}},{key:"handleChangeCommitted",value:function(){this.setState({isChanging:!1})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.playlist,n=a.tracks.length,i=Math.ceil(a.level/100*a.tracks.length);return s.a.createElement("div",{className:"PlaylistSlider"},s.a.createElement(A.a,{className:"PlaylistSlider-remove-button",onClick:this.handleClick}),s.a.createElement("div",{className:t.root},s.a.createElement(T.a,{className:"slider",orientation:"vertical",onChangeCommitted:this.handleChangeCommitted,onChange:this.handleChange,defaultValue:50})),s.a.createElement("div",{className:"track-count-container"},s.a.createElement("span",{className:"".concat(this.state.isChanging&&"isChanging")},i),s.a.createElement("span",{className:"track-count"},"/ ".concat(n))),s.a.createElement("h3",{className:"playlist-name"},a.name))}}]),a}(n.Component)),B=Object(D.a)({root:{height:"300px"}})(_),R=a(40),z=a(135),U=a(134),F=a(133),H=a(132),J=a(105),W=(a(100),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={name:"",open:!1,modalOpen:!1},n.handleClick=n.handleClick.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.closeSnackbar=n.closeSnackbar.bind(Object(f.a)(n)),n.handleModalOpen=n.handleModalOpen.bind(Object(f.a)(n)),n.handleModalClose=n.handleModalClose.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"handleModalOpen",value:function(){this.setState({modalOpen:!0})}},{key:"handleModalClose",value:function(){this.setState({modalOpen:!1})}},{key:"closeSnackbar",value:function(){this.setState({open:!1})}},{key:"handleClick",value:function(e){this.props.createPlaylist(this.state.name),this.setState({name:"",open:!0,modalOpen:!1}),e.preventDefault()}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:"NewPlaylistForm"},s.a.createElement("div",{className:"NewPlaylistForm-form"},s.a.createElement("button",{onClick:this.handleModalOpen,className:"create-playlist-button"},"Create Playlist (".concat(this.props.newPlaylistTrackCount," songs)")),s.a.createElement(F.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:this.state.modalOpen,onClose:this.handleClose,closeAfterTransition:!0,BackdropComponent:H.a,BackdropProps:{timeout:500}},s.a.createElement(J.a,{in:this.state.modalOpen},s.a.createElement("div",{className:"".concat(e.paper," modal-content")},s.a.createElement(A.a,{className:"close-icon",onClick:this.handleModalClose}),s.a.createElement("h3",null,"Create Playlist"),s.a.createElement("div",{className:"input-container"},s.a.createElement("label",{htmlFor:"name"},"Name"),s.a.createElement("input",{id:"name",onChange:this.handleChange,value:this.state.name,name:"name",type:"text",className:"name-input"}),s.a.createElement("button",{className:"create-playlist-button",onClick:this.handleClick},"Submit")))))),s.a.createElement(z.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:3e3,message:s.a.createElement("span",{id:"message-id"},"Playlist added"),contentprops:{"aria-describedby":"message-id"},onClose:this.closeSnackbar,action:[s.a.createElement(U.a,{onClick:this.closeSnackbar},s.a.createElement(A.a,null))]}))}}]),a}(n.Component)),q=Object(D.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{border:"2px solid #000"}})(W),V=(a(101),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getNewTrackCount=n.getNewTrackCount.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"getNewTrackCount",value:function(){if(this.props.chosenPlaylists.length)return this.props.chosenPlaylists.map((function(e){return Math.ceil(e.level/100*e.tracks.length)})).reduce((function(e,t){return e+t}))}},{key:"render",value:function(){var e=this.props,t=e.chosenPlaylists,a=e.removePlaylist,n=e.onLevelChange,i=e.createPlaylist;return s.a.createElement("div",{className:"MixingBoard"},s.a.createElement("div",{className:"MixingBoard-container"},t.length>0?s.a.createElement("div",{className:"MixingBoard-playlists"},t.map((function(e){return s.a.createElement(B,{removePlaylist:a,onLevelChange:n,playlist:e,key:e.id})}))):s.a.createElement("div",{className:"instructions-banner"},"Add playlists to begin")),t.length>0&&s.a.createElement(q,{newPlaylistTrackCount:this.getNewTrackCount(),createPlaylist:i}))}}]),a}(n.Component)),$=(a(102),function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={access_token:n.getHashParams().access_token,isAuthenticated:!1,userData:{},playlists:[],isLoadingPlaylists:!0,isLoadingNewPlaylist:!1,chosenPlaylists:[],isMorePlaylists:""},n.getHashParams=n.getHashParams.bind(Object(f.a)(n)),n.addPlaylist=n.addPlaylist.bind(Object(f.a)(n)),n.removePlaylist=n.removePlaylist.bind(Object(f.a)(n)),n.createPlaylist=n.createPlaylist.bind(Object(f.a)(n)),n.onLevelChange=n.onLevelChange.bind(Object(f.a)(n)),n.findMorePlaylists=n.findMorePlaylists.bind(Object(f.a)(n)),n.extractPlaylists=n.extractPlaylists.bind(Object(f.a)(n)),n.getTracks=n.getTracks.bind(Object(f.a)(n)),n.getAllTracks=n.getAllTracks.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(y.a.mark((function e(){var t,a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://accounts.spotify.com/authorize?client_id=".concat(this.props.clientID,"&redirect_uri=").concat(this.props.redirectURI,"&scope=").concat(this.props.scope,"&show_dialog=true&response_type=token"),e.next=3,this.getCurrentUser(this.state.access_token);case 3:return t=e.sent,e.next=6,this.getPlaylists("https://api.spotify.com/v1/users/".concat(t.id,"/playlists/?limit=20"));case 6:return a=e.sent,e.next=9,this.extractPlaylists(a);case 9:n=e.sent,this.setState({playlists:n,userData:t,isLoadingPlaylists:!1,isMorePlaylists:a.next});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+t}});case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlaylists",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(t,{headers:{Authorization:"Bearer "+this.state.access_token}});case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractPlaylists",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var a,n,s,i,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=0;case 2:if(!(n<t.items.length)){e.next=12;break}return s="https://api.spotify.com/v1/playlists/".concat(t.items[n].id,"/tracks"),e.next=6,this.getAllTracks(s);case 6:i=e.sent,r={name:t.items[n].name,id:t.items[n].id,tracks:i},a.push(r);case 9:n++,e.next=2;break;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllTracks",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var a,n,s,i,r,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=!0,s=t;case 3:if(!n){e.next=14;break}return e.next=6,this.getTracks(s);case 6:for(i=e.sent,r=0;r<i.data.items.length;r++)l={name:i.data.items[r].track.name,id:i.data.items[r].track.id,artists:i.data.items[r].track.artists.map((function(e){return{name:e.name,id:e.id}}))},a.push(l);if(s=i.data.next){e.next=12;break}return n=!1,e.abrupt("return",a);case 12:e.next=3;break;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTracks",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(t),{headers:{Authorization:"Bearer "+this.state.access_token}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPlaylist",value:function(e){if(this.state.chosenPlaylists.length<this.props.maxPlaylists){var t=Object(p.a)({},e,{level:50});this.setState((function(e){return{chosenPlaylists:[].concat(Object(d.a)(e.chosenPlaylists),[t])}}))}}},{key:"removePlaylist",value:function(e){var t=this;this.setState((function(a){return{chosenPlaylists:t.state.chosenPlaylists.filter((function(t){return t.id!==e}))}}))}},{key:"onLevelChange",value:function(e,t){var a=this.state.chosenPlaylists.map((function(a){return a.id===e?Object(p.a)({},a,{level:t}):a}));this.setState({chosenPlaylists:a})}},{key:"createPlaylist",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var a,n,s,i,r,l,c,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setState({isLoadingNewPlaylist:!0}),a=[],n=0;n<this.state.chosenPlaylists.length;n++)for(s=this.curatePlaylist(this.state.chosenPlaylists[n]),i=0;i<s.length;i++)a.push(s[i]);return this.shuffle(a),e.next=6,b.a.post("https://api.spotify.com/v1/users/".concat(this.state.userData.id,"/playlists"),{name:t},{headers:{Authorization:"Bearer "+this.state.access_token}});case 6:return r=e.sent,e.next=9,r.data.id;case 9:return l=e.sent,e.next=12,this.addAllTracks(a,l);case 12:return e.next=14,this.getPlaylists("https://api.spotify.com/v1/users/".concat(this.state.userData.id,"/playlists"));case 14:return c=e.sent,e.next=17,this.extractPlaylists(c);case 17:o=e.sent,this.setState({playlists:o,isMorePlaylists:c.next,isLoadingNewPlaylist:!1});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"curatePlaylist",value:function(e){for(var t=Object(p.a)({},e,{tracks:Object(d.a)(e.tracks)}),a=t.level/100*t.tracks.length,n=[],s=0;s<a;s++){var i=Math.floor(Math.random()*t.tracks.length);n.push(t.tracks[i]),t.tracks.splice(i,1)}return n}},{key:"addTracks",value:function(){var e=Object(v.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("https://api.spotify.com/v1/playlists/".concat(a,"/tracks"),{uris:this.formatURIs(t)},{headers:{Authorization:"Bearer "+this.state.access_token}});case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addAllTracks",value:function(){var e=Object(v.a)(y.a.mark((function e(t,a){var n,s,i,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length,s=0,i=n>100?100:n,r=t.slice(s,i);case 4:if(!n){e.next=13;break}return e.next=7,this.addTracks(r,a);case 7:n-=r.length,s+=i,i+=n,r=t.slice(s,i),e.next=4;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"formatURIs",value:function(e){var t=this;return e.map((function(e){return t.formatTrackID(e.id)}))}},{key:"formatTrackID",value:function(e){return"spotify:track:".concat(e)}},{key:"findMorePlaylists",value:function(){var e=Object(v.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoadingNewPlaylist:!0}),e.next=3,this.getPlaylists(this.state.isMorePlaylists);case 3:return t=e.sent,e.next=6,this.extractPlaylists(t);case 6:a=e.sent,this.setState((function(e){return{playlists:[].concat(Object(d.a)(e.playlists),Object(d.a)(a)),isLoadingNewPlaylist:!1,isMorePlaylists:t.next}}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shuffle",value:function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}},{key:"getHashParams",value:function(){for(var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=a.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}},{key:"render",value:function(){var e="https://accounts.spotify.com/authorize?client_id=".concat(this.props.clientID,"&redirect_uri=").concat(this.props.redirectURI,"&scope=").concat(this.props.scope,"&show_dialog=true&response_type=token"),t=this.state,a=t.access_token,n=t.chosenPlaylists,i=t.isLoadingPlaylists,r=t.isLoadingNewPlaylist,l=t.playlists,c=t.isMorePlaylists;return i?s.a.createElement(w,null):s.a.createElement("div",{className:"App"},s.a.createElement(x,{authorizeURL:e,accessToken:a,username:this.state.userData.id}),s.a.createElement("div",{className:"App-content-container"},s.a.createElement(L,{chosenPlaylistIDs:n.map((function(e){return e.id})),addPlaylist:this.addPlaylist,removePlaylist:this.removePlaylist,isLoading:r,playlists:l,isMorePlaylists:c,findMorePlaylists:this.findMorePlaylists}),s.a.createElement(V,{chosenPlaylists:n,createPlaylist:this.createPlaylist,removePlaylist:this.removePlaylist,onLevelChange:this.onLevelChange})))}}]),a}(n.Component));$.defaultProps={clientID:"9a9bc27e766d4e48bcd18dad29e5a877",redirectURI:"https://jeremiah-quill.github.io/spotify-playlists",scope:"user-read-private playlist-read-private playlist-modify-public playlist-modify-private",maxPlaylists:4};var G=$;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(h,null,s.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){e.exports=a.p+"static/media/spotify-icon-logo.11dc437a.png"},66:function(e,t,a){e.exports=a(103)},71:function(e,t,a){},90:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.6180f5bd.chunk.js.map